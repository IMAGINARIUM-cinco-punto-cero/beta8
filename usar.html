<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="UTSJR" content="width=, initial-scale=1.0">
    <title>UTSJR-Registro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet">
    <title>Registro</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body >

    <div>
        <nav class="navbar navbar-expand-lg " style="color: rgb(255, 255, 255); background-color: rgb(52, 80, 131);">
            <div class="container-fluid">
                <div class="nav-item dropdown" style="margin-right: 25px;">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <img src="img/index/menu.png" alt="Actitud lobo" width="40" height="40">
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                </div>
                
                <img src="img/index/soyUT.png" alt="" style="height: 40px; margin-left: 120px; margin-right: 10px; margin-right: 120px;">
                <img src="img/index/UT.png" alt="" style="height: 25px; width: 400px; margin-right: 100px;">


                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <form class="d-flex" role="Buscar">
                        <input class="form-control me-2" type="Buscar" placeholder="Buscar" aria-label="Buscar">
                        <button class="btn btn-outline-success" type="submit">Ir</button>
                    </form>
                </div>
                <div class="nav-item dropdown" style="margin-right: 20px;">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Accesos
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                </div>
            </div>
        </nav>
    </div>
    <div style="background-color:  rgb(52, 80, 131);">
        <ul class="nav nav-tabs justify-content-center">
            <li class="nav-item" style="width: 100px;">
                <a class="nav-link " aria-current="page" href="lobby.html" style="color: rgb(255, 255, 255);">Inicio</a>
            </li>
            <li class="nav-item" style="width: 100px;">
                <a class="nav-link active" aria-current="page" href="usar.html" >Usar</a>
            </li>
            <li class="nav-item" style="width: 100px;">
                <a class="nav-link" aria-current="page" href="registro.html" style="color: rgb(255, 255, 255);">Registro</a>
            </li>
            <li class="nav-item" style="width: 100px;">
                <a class="nav-link" aria-current="page" href="proyectos.html"  style="color: rgb(255, 255, 255);">Proyectos</a>
            </li>
        </ul>
    </div>

    <br>
    <br>

    <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Estilo personalizado -->
  <style>
    body {
      background-color: #f4f4f4;
    }
    .card-form {
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      padding: 30px;
    }
  </style>
</head>
<body>
  <div class="container mt-5 mb-5">
    <div class="card-form">
      <h2 class="text-center mb-4">Registro de Proyecto y Sala</h2>

      <!-- FORMULARIO -->
      <form>
        <div class="mb-3">
          <label for="nombreProyecto" class="form-label">Nombre del Proyecto:</label>
          <input type="text" class="form-control" id="nombreProyecto" placeholder="Ingresa el nombre del proyecto">
        </div>

        <!-- CALENDARIO SIMPLE -->
        <div class="mb-3">
          <label class="form-label">Selecciona una fecha:</label>
          <input type="date" class="form-control" id="fechaSeleccionada" onchange="mostrarFechaSeleccionada()">
        </div>

        <!-- HORAS -->
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="horaInicio" class="form-label">Hora de inicio:</label>
            <input type="time" class="form-control" id="horaInicio">
          </div>
          <div class="col-md-6 mb-3">
            <label for="horaFin" class="form-label">Hora de finalización:</label>
            <input type="time" class="form-control" id="horaFin">
          </div>
        </div>

        <!-- BOTÓN -->
        <button type="button" class="btn btn-primary w-100" onclick="guardarReserva()">Guardar Reserva</button>
      </form>

      <!-- MENSAJE -->
      <div id="resultadoDisponibilidad" class="mt-4 text-center text-muted">
        Selecciona una fecha para ver la disponibilidad.
      </div>

      <!-- LISTA DE RESERVAS -->
      <div class="card mt-4">
        <div class="card-header bg-secondary text-white">Fechas y Horarios Ocupados</div>
        <ul class="list-group list-group-flush" id="listaReservas">
          <li class="list-group-item text-muted">Aún no hay reservas.</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const reservas = [];

    function mostrarFechaSeleccionada() {
      const fecha = document.getElementById("fechaSeleccionada").value;
      if (fecha) {
        document.getElementById('resultadoDisponibilidad').innerHTML =
          `<p class="text-primary">Has seleccionado el día <strong>${fecha}</strong>.</p>`;
      }
    }

    function guardarReserva() {
      const btn = document.querySelector("button.btn-primary, button.btn-success");

      const nombreProyecto = document.getElementById("nombreProyecto").value.trim();
      const fecha = document.getElementById("fechaSeleccionada").value;
      const horaInicio = document.getElementById("horaInicio").value;
      const horaFin = document.getElementById("horaFin").value;
      const resultado = document.getElementById("resultadoDisponibilidad");

      if (!nombreProyecto || !fecha || !horaInicio || !horaFin) {
        alert("Por favor, llena todos los campos.");
        return;
      }

      if (horaFin <= horaInicio) {
        alert("La hora de fin debe ser mayor que la de inicio.");
        return;
      }

      const yaExiste = reservas.some(r =>
        r.fecha === fecha &&
        (
          (horaInicio >= r.horaInicio && horaInicio < r.horaFin) ||
          (horaFin > r.horaInicio && horaFin <= r.horaFin) ||
          (horaInicio <= r.horaInicio && horaFin >= r.horaFin)
        )
      );

      if (yaExiste) {
        alert("Ya existe una reserva que se cruza con este horario.");
        return;
      }

      reservas.push({ nombreProyecto, fecha, horaInicio, horaFin });
      actualizarListaReservas();

      resultado.innerHTML = `
        <p class="text-success">
          Reserva guardada:<br>
          <strong>${nombreProyecto}</strong><br>
          Fecha: <strong>${fecha}</strong><br>
          Hora: <strong>${horaInicio}</strong> a <strong>${horaFin}</strong>
        </p>
      `;

      // Cambiar color y texto del botón para mostrar que fue presionado
      btn.classList.add("btn-success");
      btn.classList.remove("btn-primary");
      btn.textContent = "Reserva Guardada";

      // Limpiar y restaurar estado del botón después de 1.5 segundos
      setTimeout(() => {
        document.getElementById("nombreProyecto").value = "";
        document.getElementById("horaInicio").value = "";
        document.getElementById("horaFin").value = "";
        document.getElementById("fechaSeleccionada").value = "";

        btn.classList.remove("btn-success");
        btn.classList.add("btn-primary");
        btn.textContent = "Guardar Reserva";

        resultado.innerHTML = "Selecciona una fecha para ver la disponibilidad.";
      }, 1500);
    }

    function actualizarListaReservas() {
      const lista = document.getElementById("listaReservas");
      lista.innerHTML = "";

      reservas.sort((a, b) => a.fecha.localeCompare(b.fecha));

      reservas.forEach(r => {
        const item = document.createElement("li");
        item.classList.add("list-group-item");
        item.innerHTML = `
          <strong>${r.fecha}</strong><br>
          Proyecto: ${r.nombreProyecto}<br>
          Hora: ${r.horaInicio} - ${r.horaFin}
        `;
        lista.appendChild(item);
      });
    }
  </script>

        


</body>



</html>